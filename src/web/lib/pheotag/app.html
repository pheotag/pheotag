<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="pics.html">
<link rel="import" href="datetime.html">
<link rel="import" href="map.html">
<link rel="import" href="gpx.html">

<dom-module id="geotag-app">

    <template>
        <style>
            :host {
                display: flex;
                flex-direction: row;
                width: 100%;
                height: 100%;
            }
            #datetime {
                position: absolute;
                z-index: 2;
                width: 240px;
                top: 0;
                left: calc(50% - 120px);
            }
            #pics {
                flex: 0;
                box-shadow: 8px 0px 16px rgba(0, 0, 0, 0.25) !important;
                z-index: 1;
            }
            #map {
                flex: 1;
            }
            #gpx {
                flex: 0;
                box-shadow: -8px 0px 16px rgba(0, 0, 0, 0.25) !important;
                z-index: 1;
            }
        </style>
        <geotag-datetime id="datetime" value="{{ dateTime }}"></geotag-datetime>
        <geotag-pics id="pics" latitude="{{ latitude }}" longitude="{{ longitude }}" date-time="{{ dateTime }}" on-photo="photoEventHandler"></geotag-pics>
        <geotag-map id="map" latitude="{{ latitude }}" longitude="{{ longitude }}" waypoints="{{ waypoints }}"></geotag-map>
        <geotag-gpx id="gpx" latitude="{{ latitude }}" longitude="{{ longitude }}" waypoints="{{ waypoints }}"></geotag-gpx>
    </template>

    <script>
        /** @polymerElement */
        class GeoTagApp extends Polymer.Element {
            /**
             *
             */
            static get is() {
                return 'geotag-app';
            }

            /**
             *
             */
            ready() {
                super.ready();
                this.photoEventHandler = this.$.gpx.photoEventHandler.bind( this.$.gpx );
            }
        }
        window.customElements.define(GeoTagApp.is, GeoTagApp);
    </script>

</dom-module>